<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login Dashboards Power BI</title>
<style>
  body { 
    font-family: Arial, sans-serif; 
    background-color: #f4f4f4; 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    height: 100vh; 
    margin: 0; 
  }
  .login-box { 
    background: white; 
    padding: 30px; 
    border-radius: 8px; 
    box-shadow: 0 4px 10px rgba(0,0,0,0.2); 
    text-align: center; 
    width: 320px; 
  }
  input { 
    width: 90%; 
    padding: 10px; 
    margin: 10px 0; 
    border-radius: 4px; 
    border: 1px solid #ccc; 
    font-size: 16px; 
  }
  button { 
    padding: 10px 20px; 
    background-color: #0078d4; 
    color: white; 
    border: none; 
    border-radius: 4px; 
    cursor: pointer; 
    font-size: 16px; 
  }
  button:hover { 
    background-color: #005a9e; 
  }
  .error { 
    color: red; 
    margin-top: 10px; 
  }
</style>
</head>
<body>

<div class="login-box">
  <h2>Login Dashboard</h2>
  <input type="text" id="ruc" placeholder="RUC">
  <input type="password" id="password" placeholder="Contrase침a">
  <button onclick="login()">Ingresar</button>
  <div class="error" id="error"></div>
</div>

<script>
// URL de tu CSV en GitHub (cambia TUUSUARIO y login-dashboard por tu repo real)
const csvUrl = 'https://raw.githubusercontent.com/practicantesigips/GRUPO-IPS-PERU-DASHBOARD/main/usuarios.csv';
let users = [];

// Funci칩n para parsear CSV
function parseCSV(data) {
  const lines = data.trim().split('\n');
  const result = [];
  for(let i = 1; i < lines.length; i++){ // saltamos encabezado
    const row = lines[i].split(',');
    if(row.length >= 3){
      result.push({
        ruc: row[0].trim(),
        password: row[1].trim(),
        link: row[2].trim()
      });
    }
  }
  return result;
}

// Cargar usuarios desde CSV
async function loadCSV() {
  try {
    const response = await fetch(csvUrl);
    const data = await response.text();
    users = parseCSV(data);
    console.log('Usuarios cargados:', users);
  } catch (err) {
    console.error('Error al cargar CSV', err);
  }
}

// Funci칩n de login
function login() {
  const rucInput = document.getElementById('ruc').value.trim();
  const passInput = document.getElementById('password').value.trim();
  const errorDiv = document.getElementById('error');

  const user = users.find(u => u.ruc === rucInput && u.password === passInput);
  if(user) {
    window.location.href = user.link; // redirigir al dashboard
    errorDiv.textContent = '';
  } else {
    errorDiv.textContent = 'RUC o Contrase침a incorrectos';
  }
}

// Cargar usuarios al iniciar
window.onload = loadCSV;
</script>

</body>
</html>

